{"id":"Grace-5c3","title":"Authorization/Access control implementation","status":"open","priority":1,"issue_type":"epic","created_at":"2025-12-28T23:07:44.6284068-08:00","created_by":"Scott Arbeit","updated_at":"2025-12-28T23:07:44.6284068-08:00"}
{"id":"Grace-5c3.1","title":"Authz: codebase reconnaissance and conventions","description":"Review existing patterns (actors, handlers, params, SDK/CLI) and locate stubs/target endpoints to protect; confirm serializer and validation conventions.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T23:07:58.2365723-08:00","created_by":"Scott Arbeit","updated_at":"2025-12-28T23:14:19.3631334-08:00","closed_at":"2025-12-28T23:14:19.3631334-08:00","close_reason":"Recon complete","dependencies":[{"issue_id":"Grace-5c3.1","depends_on_id":"Grace-5c3","type":"parent-child","created_at":"2025-12-28T23:07:58.2414666-08:00","created_by":"daemon"}]}
{"id":"Grace-5c3.10","title":"Authz: unit + integration tests","description":"Add pure authorization unit tests and server integration tests for /access, enforcement, and auth headers; update General.Server.Tests.fs headers.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T23:08:36.7155492-08:00","created_by":"Scott Arbeit","updated_at":"2025-12-29T00:17:49.3242606-08:00","closed_at":"2025-12-29T00:17:49.3242606-08:00","close_reason":"Closed","dependencies":[{"issue_id":"Grace-5c3.10","depends_on_id":"Grace-5c3","type":"parent-child","created_at":"2025-12-28T23:08:36.7204264-08:00","created_by":"daemon"}]}
{"id":"Grace-5c3.11","title":"Authz: formatting/build/test verification","description":"Run fantomas, dotnet build Release, and dotnet test for Server.Tests + CLI.Tests after code changes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:08:40.9300256-08:00","created_by":"Scott Arbeit","updated_at":"2025-12-29T01:27:14.0420934-08:00","closed_at":"2025-12-29T01:27:14.0420934-08:00","dependencies":[{"issue_id":"Grace-5c3.11","depends_on_id":"Grace-5c3","type":"parent-child","created_at":"2025-12-28T23:08:40.9347831-08:00","created_by":"daemon"}]}
{"id":"Grace-5c3.12","title":"Auth: external auth config + claim mapping","description":"Add auth provider config model + env var bindings; implement claims transformation mapping external provider claims to grace_user_id and grace_claim (MSA + Entra). Include provider-agnostic mapping helper + /auth/me endpoint + unit tests for mapping logic.","notes":"Config + claim mapping + /auth/me + unit tests","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-30T00:20:35.5829516-08:00","created_by":"Scott Arbeit","updated_at":"2025-12-30T01:08:29.3280438-08:00","closed_at":"2025-12-30T01:08:29.3280438-08:00","dependencies":[{"issue_id":"Grace-5c3.12","depends_on_id":"Grace-5c3","type":"parent-child","created_at":"2025-12-30T00:20:35.5835408-08:00","created_by":"daemon"}]}
{"id":"Grace-5c3.13","title":"Auth: login provider selection page + endpoints","description":"Add /auth/login page listing configured providers; add /auth/login/{provider} challenge endpoint + returnUrl handling; add /auth/logout endpoint; wire routes in Startup.Server.fs; show only providers with valid config.","status":"in_progress","priority":2,"issue_type":"task","created_at":"2025-12-30T00:20:37.3729975-08:00","created_by":"Scott Arbeit","updated_at":"2025-12-30T01:08:55.3578764-08:00","dependencies":[{"issue_id":"Grace-5c3.13","depends_on_id":"Grace-5c3","type":"parent-child","created_at":"2025-12-30T00:20:37.3784688-08:00","created_by":"daemon"}]}
{"id":"Grace-5c3.14","title":"Auth: Microsoft (MSA) OIDC + JWT bearer integration","description":"Configure Cookie + OpenIdConnect (Microsoft) and JwtBearer schemes for MSA+Entra; keep GraceTest when GRACE_TESTING=1; set default challenge/forbid scheme selection and callbacks; validate JWT audience for Grace API scope.","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-30T00:20:39.1621794-08:00","created_by":"Scott Arbeit","updated_at":"2025-12-30T01:00:48.4850094-08:00","dependencies":[{"issue_id":"Grace-5c3.14","depends_on_id":"Grace-5c3","type":"parent-child","created_at":"2025-12-30T00:20:39.1676651-08:00","created_by":"daemon"}]}
{"id":"Grace-5c3.15","title":"Auth: auth pipeline tests","description":"Add unit tests for claim mapping; integration test for /auth/login provider list + challenge route (no external IdP calls); verify GraceTest auth still works. Add minimal CLI auth tests if feasible without IdP calls.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T00:20:41.0655512-08:00","created_by":"Scott Arbeit","updated_at":"2025-12-30T01:00:50.1450832-08:00","dependencies":[{"issue_id":"Grace-5c3.15","depends_on_id":"Grace-5c3","type":"parent-child","created_at":"2025-12-30T00:20:41.0709904-08:00","created_by":"daemon"}]}
{"id":"Grace-5c3.16","title":"Docs: MSA app registration + local config","description":"Document MSA+Entra app registration (web + CLI apps), API scope, redirect URIs, required env vars/user-secrets, and CLI login usage. Note GitHub/Google placeholders for future providers.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-30T00:20:42.9343128-08:00","created_by":"Scott Arbeit","updated_at":"2025-12-30T01:00:51.7329024-08:00","dependencies":[{"issue_id":"Grace-5c3.16","depends_on_id":"Grace-5c3","type":"parent-child","created_at":"2025-12-30T00:20:42.9402113-08:00","created_by":"daemon"}]}
{"id":"Grace-5c3.17","title":"Auth: CLI/GUI device-code login + token cache","description":"Add CLI auth commands (login/status/logout/whoami) using MSAL device code; store tokens in OS-protected cache; update Grace SDK/CLI HTTP client to send Bearer tokens; update grace connect to require auth / prompt login; support re-auth in existing repos.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-30T01:00:58.2662025-08:00","created_by":"Scott Arbeit","updated_at":"2025-12-30T01:01:04.6164904-08:00","dependencies":[{"issue_id":"Grace-5c3.17","depends_on_id":"Grace-5c3","type":"parent-child","created_at":"2025-12-30T01:00:58.2777028-08:00","created_by":"daemon"}]}
{"id":"Grace-5c3.2","title":"Authz: add authorization domain types","description":"Add Authorization.Types.fs in Grace.Types with Principal/Scope/Resource/Operation/Role types + update fsproj; follow serializer/versioning conventions.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T23:08:02.281657-08:00","created_by":"Scott Arbeit","updated_at":"2025-12-28T23:16:34.3723615-08:00","closed_at":"2025-12-28T23:16:34.3723615-08:00","close_reason":"Authorization types added","dependencies":[{"issue_id":"Grace-5c3.2","depends_on_id":"Grace-5c3","type":"parent-child","created_at":"2025-12-28T23:08:02.2871518-08:00","created_by":"daemon"}]}
{"id":"Grace-5c3.3","title":"Authz: implement pure authorization core","description":"Add Authorization.Shared.fs in Grace.Shared with RoleCatalog, scope resolution, effective ops, path permission checks, and checkPermission.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T23:08:06.5102728-08:00","created_by":"Scott Arbeit","updated_at":"2025-12-28T23:27:54.83891-08:00","closed_at":"2025-12-28T23:27:54.83891-08:00","close_reason":"Authorization core added","dependencies":[{"issue_id":"Grace-5c3.3","depends_on_id":"Grace-5c3","type":"parent-child","created_at":"2025-12-28T23:08:06.5158736-08:00","created_by":"daemon"}]}
{"id":"Grace-5c3.4","title":"Authz: AccessControl actor + RepositoryPermission actor","description":"Implement AccessControl.Actor.fs + interface + constants; complete RepositoryPermission.Actor.fs with upsert/remove/list path permissions.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T23:08:10.4735628-08:00","created_by":"Scott Arbeit","updated_at":"2025-12-28T23:35:20.2381363-08:00","closed_at":"2025-12-28T23:35:20.2381363-08:00","close_reason":"AccessControl + RepositoryPermission actors added","dependencies":[{"issue_id":"Grace-5c3.4","depends_on_id":"Grace-5c3","type":"parent-child","created_at":"2025-12-28T23:08:10.4792076-08:00","created_by":"daemon"}]}
{"id":"Grace-5c3.5","title":"Authz: server security plumbing","description":"Add GraceTest auth handler, PrincipalMapper, and PermissionEvaluator service; wire DI/auth scheme selection in Startup.Server.fs.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T23:08:14.5953805-08:00","created_by":"Scott Arbeit","updated_at":"2025-12-28T23:38:47.1199966-08:00","closed_at":"2025-12-28T23:38:47.1199966-08:00","close_reason":"Test auth + permission evaluator wired","dependencies":[{"issue_id":"Grace-5c3.5","depends_on_id":"Grace-5c3","type":"parent-child","created_at":"2025-12-28T23:08:14.6007802-08:00","created_by":"daemon"}]}
{"id":"Grace-5c3.6","title":"Authz: /access parameters, handlers, routing","description":"Add Access.Parameters.fs, Access.Server.fs handlers, and /access routes with metadata/auth requirements.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T23:08:19.0690592-08:00","created_by":"Scott Arbeit","updated_at":"2025-12-28T23:45:37.0740752-08:00","closed_at":"2025-12-28T23:45:37.0740752-08:00","close_reason":"Access parameters and endpoints added","dependencies":[{"issue_id":"Grace-5c3.6","depends_on_id":"Grace-5c3","type":"parent-child","created_at":"2025-12-28T23:08:19.0750897-08:00","created_by":"daemon"}]}
{"id":"Grace-5c3.7","title":"Authz: SDK access surface","description":"Add Access.SDK.fs methods for /access endpoints and update Grace.SDK.fsproj.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:08:23.1901245-08:00","created_by":"Scott Arbeit","updated_at":"2025-12-28T23:46:44.3452613-08:00","closed_at":"2025-12-28T23:46:44.3452613-08:00","close_reason":"Access SDK added","dependencies":[{"issue_id":"Grace-5c3.7","depends_on_id":"Grace-5c3","type":"parent-child","created_at":"2025-12-28T23:08:23.1949443-08:00","created_by":"daemon"}]}
{"id":"Grace-5c3.8","title":"Authz: CLI access commands","description":"Add Access.CLI.fs command tree + options and register in Program.CLI.fs; output supports --json.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-28T23:08:27.2244712-08:00","created_by":"Scott Arbeit","updated_at":"2025-12-29T00:04:34.4116541-08:00","closed_at":"2025-12-29T00:04:34.4116541-08:00","close_reason":"Closed","dependencies":[{"issue_id":"Grace-5c3.8","depends_on_id":"Grace-5c3","type":"parent-child","created_at":"2025-12-28T23:08:27.2298486-08:00","created_by":"daemon"}]}
{"id":"Grace-5c3.9","title":"Authz: enforce permissions on endpoints","description":"Add requiresPermission middleware and protect at least repo-level + path-level endpoints (e.g., setDescription + getUploadMetadataForFiles).","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-28T23:08:32.0246786-08:00","created_by":"Scott Arbeit","updated_at":"2025-12-29T00:11:24.16764-08:00","closed_at":"2025-12-29T00:11:24.16764-08:00","close_reason":"Closed","dependencies":[{"issue_id":"Grace-5c3.9","depends_on_id":"Grace-5c3","type":"parent-child","created_at":"2025-12-28T23:08:32.0309851-08:00","created_by":"daemon"}]}
